<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>OIFITSlib: oifile.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>oifile.c File Reference</h1>Implementation of file-level API for OIFITS data.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;stdlib.h&gt;</code><br>
<code>#include &lt;string.h&gt;</code><br>
<code>#include &lt;fitsio.h&gt;</code><br>
<code>#include &quot;<a class="el" href="oifile_8h-source.html">oifile.h</a>&quot;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="oifile_8c.html#caf591dad183d48db65ec59ac0f884ff">WRITE_OI_LIST</a>(fptr, list, type, link, write_func, extver, pStatus)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Macro to write FITS table for each oi_* in GList.  <a href="#caf591dad183d48db65ec59ac0f884ff"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="oifile_8c.html#339b473f2077f693155f5b0025f3f9db">FORMAT_OI_LIST_SUMMARY</a>(<a class="el" href="oifilter_8c.html#e68c5c09c75454641efd5ae0393985e2">pGStr</a>, list, type, link)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Macro to generate summary string for each oi_vis/vis2/t3 in GList.  <a href="#339b473f2077f693155f5b0025f3f9db"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef void(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="oifile_8c.html#6aad04dd35758f6afc6c33cf6ede177c">free_func</a> )(gpointer)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Typedef to specify pointer to a function that frees its argument.  <a href="#6aad04dd35758f6afc6c33cf6ede177c"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__oifile.html#ga33dc12dbe251f4f21ba54b329a9a763">init_oi_fits</a> (<a class="el" href="structoi__fits.html">oi_fits</a> *pOi)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialise empty <a class="el" href="structoi__fits.html" title="Data for OIFITS file.">oi_fits</a> struct.  <a href="group__oifile.html#ga33dc12dbe251f4f21ba54b329a9a763"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__oitable.html#g0cb9c7fae5afe4237eb4d5d43318fa18">STATUS</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__oifile.html#g6ebd2c28298f85d4bdb243d06c64ff07">write_oi_fits</a> (const char *filename, <a class="el" href="structoi__fits.html">oi_fits</a> oi, <a class="el" href="group__oitable.html#g0cb9c7fae5afe4237eb4d5d43318fa18">STATUS</a> *pStatus)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write OIFITS tables to new FITS file.  <a href="group__oifile.html#g6ebd2c28298f85d4bdb243d06c64ff07"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__oitable.html#g0cb9c7fae5afe4237eb4d5d43318fa18">STATUS</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__oifile.html#ge53cd53b76d9a8ba1a9efd5a0bf30009">read_oi_fits</a> (const char *filename, <a class="el" href="structoi__fits.html">oi_fits</a> *pOi, <a class="el" href="group__oitable.html#g0cb9c7fae5afe4237eb4d5d43318fa18">STATUS</a> *pStatus)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read all OIFITS tables from FITS file.  <a href="group__oifile.html#ge53cd53b76d9a8ba1a9efd5a0bf30009"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__oifile.html#g7b7394ae50f7a19de503f8e99112610b">free_oi_fits</a> (<a class="el" href="structoi__fits.html">oi_fits</a> *pOi)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Free storage used for OIFITS data.  <a href="group__oifile.html#g7b7394ae50f7a19de503f8e99112610b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structoi__array.html">oi_array</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__oifile.html#gcb703f11965f831bb1d20f6133579ba0">oi_fits_lookup_array</a> (const <a class="el" href="structoi__fits.html">oi_fits</a> *pOi, const char *arrname)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return <a class="el" href="structoi__array.html" title="Data for OI_ARRAY FITS table.">oi_array</a> corresponding to specified ARRNAME.  <a href="group__oifile.html#gcb703f11965f831bb1d20f6133579ba0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structelement.html">element</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__oifile.html#g1e4e24217a25c94a48c04f0419433911">oi_fits_lookup_element</a> (const <a class="el" href="structoi__fits.html">oi_fits</a> *pOi, const char *arrname, int staIndex)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Lookup array <a class="el" href="structelement.html" title="Array element.">element</a> corresponding to specified ARRNAME &amp; STA_INDEX.  <a href="group__oifile.html#g1e4e24217a25c94a48c04f0419433911"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structoi__wavelength.html">oi_wavelength</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__oifile.html#gf0881bab893801a952caf693ac39595d">oi_fits_lookup_wavelength</a> (const <a class="el" href="structoi__fits.html">oi_fits</a> *pOi, const char *insname)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Lookup <a class="el" href="structoi__wavelength.html" title="Data for OI_WAVELENGTH FITS table.">oi_wavelength</a> corresponding to specified INSNAME.  <a href="group__oifile.html#gf0881bab893801a952caf693ac39595d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structtarget.html">target</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__oifile.html#g017e076d4922e9b24c42235ca2e6ecb2">oi_fits_lookup_target</a> (const <a class="el" href="structoi__fits.html">oi_fits</a> *pOi, int targetId)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Lookup <a class="el" href="structtarget.html" title="Info on an observing target.">target</a> record corresponding to specified TARGET_ID.  <a href="group__oifile.html#g017e076d4922e9b24c42235ca2e6ecb2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__oifile.html#g8aeb7a040fbb0aaa44a3a70023cb73c6">format_oi_fits_summary</a> (const <a class="el" href="structoi__fits.html">oi_fits</a> *pOi)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Generate file summary string.  <a href="group__oifile.html#g8aeb7a040fbb0aaa44a3a70023cb73c6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__oifile.html#g03aac7c8459a3b9a714f1f5ba9ceb02f">print_oi_fits_summary</a> (const <a class="el" href="structoi__fits.html">oi_fits</a> *pOi)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Print file summary to stdout.  <a href="group__oifile.html#g03aac7c8459a3b9a714f1f5ba9ceb02f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structoi__target.html">oi_target</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__oifile.html#g5953fc147d9bc9d1cb65ee89ac1628a8">dup_oi_target</a> (const <a class="el" href="structoi__target.html">oi_target</a> *pInTab)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Make deep copy of a OI_TARGET table.  <a href="group__oifile.html#g5953fc147d9bc9d1cb65ee89ac1628a8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structoi__array.html">oi_array</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__oifile.html#g92c5e13d5c3646581306db31166ce231">dup_oi_array</a> (const <a class="el" href="structoi__array.html">oi_array</a> *pInTab)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Make deep copy of a OI_ARRAY table.  <a href="group__oifile.html#g92c5e13d5c3646581306db31166ce231"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structoi__wavelength.html">oi_wavelength</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__oifile.html#ge2a0753c13f7a77ae1b9683df2f623cc">dup_oi_wavelength</a> (const <a class="el" href="structoi__wavelength.html">oi_wavelength</a> *pInTab)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Make deep copy of a OI_WAVELENGTH table.  <a href="group__oifile.html#ge2a0753c13f7a77ae1b9683df2f623cc"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structoi__vis.html">oi_vis</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__oifile.html#gf1a6cab04904fa5b0772335cfb7bc393">dup_oi_vis</a> (const <a class="el" href="structoi__vis.html">oi_vis</a> *pInTab)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Make deep copy of a OI_VIS table.  <a href="group__oifile.html#gf1a6cab04904fa5b0772335cfb7bc393"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structoi__vis2.html">oi_vis2</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__oifile.html#g9bf68f00b7a0d377048edec2361303b9">dup_oi_vis2</a> (const <a class="el" href="structoi__vis2.html">oi_vis2</a> *pInTab)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Make deep copy of a OI_VIS2 table.  <a href="group__oifile.html#g9bf68f00b7a0d377048edec2361303b9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structoi__t3.html">oi_t3</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__oifile.html#gb4b42bcc3272234da6cd103acc1d3a63">dup_oi_t3</a> (const <a class="el" href="structoi__t3.html">oi_t3</a> *pInTab)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Make deep copy of a OI_T3 table.  <a href="group__oifile.html#gb4b42bcc3272234da6cd103acc1d3a63"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">GString *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="oifile_8c.html#e68c5c09c75454641efd5ae0393985e2">pGStr</a> = NULL</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">GLib expanding string buffer, for use within OIFITSlib.  <a href="#e68c5c09c75454641efd5ae0393985e2"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Implementation of file-level API for OIFITS data. 
<p>
Copyright (C) 2007 John Young<p>
This file is part of OIFITSlib.<p>
OIFITSlib is free software: you can redistribute it and/or modify it under the terms of the GNU Lesser General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.<p>
OIFITSlib is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more details.<p>
You should have received a copy of the GNU Lesser General Public License along with OIFITSlib. If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a> <hr><h2>Define Documentation</h2>
<a class="anchor" name="caf591dad183d48db65ec59ac0f884ff"></a><!-- doxytag: member="oifile.c::WRITE_OI_LIST" ref="caf591dad183d48db65ec59ac0f884ff" args="(fptr, list, type, link, write_func, extver, pStatus)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WRITE_OI_LIST          </td>
          <td>(</td>
          <td class="paramtype">fptr,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">list,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">link,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">write_func,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">extver,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pStatus&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Value:</b><div class="fragment"><pre class="fragment">link = list; \
  extver = 1; \
  <span class="keywordflow">while</span>(link != NULL) { \
    write_func(fptr, *((type *) link-&gt;data), extver++, pStatus); \
    link = link-&gt;next; \
  }
</pre></div>Macro to write FITS table for each oi_* in GList. 
<p>

<p>Referenced by <a class="el" href="oifile_8c-source.html#l00202">write_oi_fits()</a>.</p>

</div>
</div><p>
<a class="anchor" name="339b473f2077f693155f5b0025f3f9db"></a><!-- doxytag: member="oifile.c::FORMAT_OI_LIST_SUMMARY" ref="339b473f2077f693155f5b0025f3f9db" args="(pGStr, list, type, link)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FORMAT_OI_LIST_SUMMARY          </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="oifilter_8c.html#e68c5c09c75454641efd5ae0393985e2">pGStr</a>,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">list,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">link&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Value:</b><div class="fragment"><pre class="fragment">{ link = list; \
    <span class="keywordflow">while</span>(link != NULL) { \
      g_string_append_printf( \
       <a class="code" href="oifile_8c.html#e68c5c09c75454641efd5ae0393985e2" title="GLib expanding string buffer, for use within OIFITSlib.">pGStr</a>, \
       <span class="stringliteral">"    INSNAME='%s'  ARRNAME='%s'  DATE_OBS=%s\n"</span> \
       <span class="stringliteral">"     %5ld records x %3d wavebands\n"</span>, \
       ((type *) (link-&gt;data))-&gt;insname,  \
       ((type *) (link-&gt;data))-&gt;arrname,  \
       ((type *) (link-&gt;data))-&gt;date_obs, \
       ((type *) (link-&gt;data))-&gt;numrec,   \
       ((type *) (link-&gt;data))-&gt;nwave);   \
      link = link-&gt;next; \
    } \
  }
</pre></div>Macro to generate summary string for each oi_vis/vis2/t3 in GList. 
<p>

<p>Referenced by <a class="el" href="oifile_8c-source.html#l00521">format_oi_fits_summary()</a>.</p>

</div>
</div><p>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="6aad04dd35758f6afc6c33cf6ede177c"></a><!-- doxytag: member="oifile.c::free_func" ref="6aad04dd35758f6afc6c33cf6ede177c" args=")(gpointer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* <a class="el" href="oifile_8c.html#6aad04dd35758f6afc6c33cf6ede177c">free_func</a>)(gpointer)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Typedef to specify pointer to a function that frees its argument. 
<p>

</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="e68c5c09c75454641efd5ae0393985e2"></a><!-- doxytag: member="oifile.c::pGStr" ref="e68c5c09c75454641efd5ae0393985e2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GString* <a class="el" href="oifilter_8c.html#e68c5c09c75454641efd5ae0393985e2">pGStr</a> = NULL          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
GLib expanding string buffer, for use within OIFITSlib. 
<p>
Internal use GString, defined in <a class="el" href="oifile_8c.html" title="Implementation of file-level API for OIFITS data.">oifile.c</a>.
<p>Referenced by <a class="el" href="oicheck_8c-source.html#l00102">format_check_result()</a>, and <a class="el" href="oifilter_8c-source.html#l00222">format_oi_filter()</a>.</p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Jun 8 12:45:07 2009 for OIFITSlib by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.7.1 </small></address>
</body>
</html>
